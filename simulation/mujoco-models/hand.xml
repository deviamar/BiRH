<!-- BiRH Prototype 2 -->

<mujoco model="hand">
  <compiler coordinate="local" angle="radian"/>
  <option gravity="0 0 -9.81" integrator="RK4" timestep="0.0001">
    <flag contact="enable" energy="enable"/>
  </option>

  <asset>
    <texture name="grid" type="2d" builtin="checker" rgb1=".1 .2 .3" rgb2=".2 .3 .4" width="300" height="300"/>
    <material name="grid" texture="grid" texrepeat="8 8" reflectance=".2"/>

    <!-- Mesh of all the objects -->
    <mesh name="apple_mesh" file="/Users/stellaluna/apple.stl" scale="2 2 2"/>
  </asset>

  <worldbody>
    <geom size="1 1 .002" type="plane" material="grid" pos="0 0 0"/>
    <light pos="0 0 5"/>
    <camera name="camera" pos="0 -1 2" xyaxes="1 0 0 0 2 2"/>

    <!--  Forearm -->
    <body name="forearm" pos="0 0 0">
      <geom name="forearm" type="cylinder" pos="0 0 0.1" size="0.035 0.1"/>

        <!--  Hand  -->
        <body name="hand" pos="0 0 .2">
          <!--<joint name="wrist" type="hinge" damping="100" axis="1 0 0"/>-->
          <geom name="palm" type="cylinder" pos="0 0 0" size="0.1 0.025"/>

          <!--  Finger 1  -->
          <body name="finger1_pp" pos="0 .1 0">
            <joint name="mpj1" type="hinge" axis="1 0 0" damping="5" range="0 90"/>
            <geom name="pp1" type="capsule" fromto="0 0 0 0 .15 0" size="0.025" mass=".1"/>
              <body name="finger1_mp" pos="0 .15 0">
                <joint name="pipj1" type="hinge" axis="1 0 0" damping="5" range="0 90"/>
                <geom name="mp1" type="capsule" fromto="0 0 0 0 .1 0" size="0.025" mass=".1"/>
                  <geom name="finger1_pad" type="box" pos="0 0.08 0" size="0.02 0.015 0.01" 
                        friction="1.5 0.1 0.001" rgba="0.8 0.6 0.4 1"/>
              </body>
          </body>

          <!--  Finger 2  -->
          <body name="finger2_pp" pos="-0.0707 0.0707 0">
            <joint name="mpj2" type="hinge" axis="1 1 0" damping="5" range="0 1.571"/>
            <geom name="pp2" type="capsule" fromto="0 0 0 -.106 .106 0" size="0.025" mass=".1"/>
              <body name="finger2_mp" pos="-.106 .106 0">
                <joint name="pipj2" type="hinge" axis="1 1 0" damping="5" range="0 1.571"/>
                <geom name="mp2" type="capsule" fromto="0 0 0 -0.0707 0.0707 0" size="0.025" mass=".1"/>
              </body>
          </body>

          <!-- Thumb -->
          <body name="thumb_pp" pos="0.0707 -0.0707 0">
            <joint name="mpjt" type="hinge" axis="1 1 0" damping="5" range="0 1.571"/>
            <joint name="abd_add" type="hinge" axis="0 0 1" damping="5" range="-0.5237 0.5237"/>
            <geom name="ppt" type="capsule" fromto="0 0 0 .106 -.106 0" size="0.025" mass=".1"/>
              <body name="fingert_mp" pos=".106 -.106 0">
                <joint name="pipjt" type="hinge" axis="1 1 0" damping="5" range="-1.571 0"/>
                <geom name="mpt" type="capsule" fromto="0 0 0 0.0707 -0.0707 0" size="0.025" mass=".1"/>
              </body>
          </body>

          
        </body>
    </body>

    <body name="apple" pos="0 0 .3">
      <freejoint/>
      <geom name="apple_geom" type="mesh" mesh="apple_mesh" mass="0.2"/>
    </body>

  </worldbody>

  <actuator>
    <!-- Finger 1 joint position actuators -->
    <position name="mpj1_motor" joint="mpj1" kp="200" ctrlrange="0 1.571"/>
    <position name="pipj1_motor" joint="pipj1"  kp="100" ctrlrange="0 1.571"/>

    <!-- Finger 2 joint position actuators -->
    <position name="mpj2_motor" joint="mpj2" kp="200" ctrlrange="0 1.571"/>
    <position name="pipj2_motor" joint="pipj2" kp="100" ctrlrange="0 1.571"/>

    <!-- Thumb joint position actuators -->
    <position name="mpjt_motor" joint="mpjt" kp="2000" ctrlrange="-1.571 0"/>
    <position name="abd_add_motor" joint="abd_add" kp="5000" ctrlrange="-1.2 1.2"/>
    <position name="pipjt_motor" joint="pipjt" kp="1000" ctrlrange="-1.571 0"/>
    
    
  </actuator>


</mujoco>